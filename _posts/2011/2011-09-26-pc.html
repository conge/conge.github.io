---
layout: post
title: "[电脑网络] 将 PC 虚拟化 手记"
date: '2011-09-26T01:30:00.000-08:00'
author: Qingyang
tags:
- 电脑网络
modified_time: '2011-09-26T08:46:36.759-08:00'
blogger_id: tag:blogger.com,1999:blog-25302544.post-8572231506558273247
blogger_orig_url: https://psychattic.blogspot.com/2011/09/pc.html
---

注意，本文未整理，发布出来作为自己的参考。<br /><br />＝＝＝＝＝＝＝＝＝<br />在Kai的blog <a href="http://khchuang.blogspot.com/2011/09/pcmac-2.html">美国鼠谈</a>上看到他利用<a href="http://www.vmware.com/products/fusion/overview.html">VMWare Fusion</a>的PC2MAC功能将之前用的PC转换成虚拟镜像，既保留了原来的文件又能不时的使用Windows上的程序，而且所有的软件均能顺利迁移。这让我也动起了心思，想要把自己netbook上的Windows也迁移过去，省得还不时的得切换PC，做一些只有在Windows下的工作。<br /><br />我先是取得了VMWare Fusion的30 day 试用，按照<a href="http://communities.vmware.com/docs/DOC-11426">这篇文章</a>(英文)的方法做好各项设置之后，运行migration失败。说是什么防火墙的问题，可是我都已经把防火墙给停掉了呀!<br /><br />可能是我的Windows系统有什么设置上的问题吧。反正是没有成功。我打算暂且不管了。<br /><br />之后却柳暗花明地发现Paragon的 “<span style="background-color: white; color: black; font-family: Arial; font-size: large;">Paragon Go Virtual</span><span style="background-color: white; color: #5b5d5a; font-family: Arial; font-size: 12px;">&nbsp;</span>”。它也可以将系统转化为虚拟镜像使用，而且还支持免费的Virtualbox的格式（请看重灌狂人的<a href="http://briian.com/?p=7106">介绍</a>，下载软件的话可以到<a href="http://www.pcworld.com/downloads/file/fid,156711/description.html">这里</a>），这个也当然要试用一下。结果呢，因为需要制成的镜像文件太大，无处保存而告终。不过，这款软件支持通过网络进行存储的。我下面只需要搞定Windows能共享到我的Mac的文件夹就可以了。<br /><br />这说起来简单，但执行起来却遇到了困难。因为我的MACBook Pro是工作的地方给配发的,账户的设置上使用的是Apple 的Mobile&nbsp;Account&nbsp;under Active&nbsp;Directory&nbsp;Login。在这种情况下，我无法开启SMB sharing（开启SMB sharing 需要关联本地账户）。然后就卡在这里，不知道下一步如何进行。<br />＝＝＝＝<br />休息了一下，我想到有三条路可以走：一想办法解决Mobile Account 在AD login下无法使用SMB share；二，想办法获取系统管理员的密码（非Mobile账户）；三，创建一个新的账户，进行分享。比较之下，第三个更加容易办到。<br /><br />于是，我建立了一个临时账户，并且不为这个账户进行Mobile设置。接下来为这个账户设置分享文件夹，赋予读写权限，并设置通过SMB分享设置好了。重新登录之后，windows中出现了Mac电脑。按Paragon Go Virtrual的提示一步步的选好文件夹，填好登录Mac的用户名密码什么的，点OK。然后这程序就会开始同Mac建立连接。需要注意的是，Paragon go virtual先要把Mac上共享的文件夹mount成一个Drive，或者说是网络磁盘。这个过程中，可能会跳将出一个对话框让你填用户名密码。这个时候的用户名密码要填的是你的Windows的具有管理员权限的用户名密码！。 （进行到这里，我忽然想到，是不是我之前使用<a href="http://www.vmware.com/products/fusion/overview.html">VMWare Fusion</a>&nbsp;应当用管理员帐号打开呀？又或者我如果用管理员帐号打开Paragon Go Virtual，这里就不会有这个对话框啊？无论怎样，都已经进行到这一步了，耐心等待吧..... 如果目前的做法不行，回头再去试就得了。）<br /><br />=====<br />2:26开始转换。<br /><br />转换进行当中，估计会进行几个小时吧。用这个时间，我先来写写心得。<br /><br />其实Paragon go virtual与 VMware &nbsp;PC2Mac tool做的事情是一样的，都是将当前的系统给虚拟化成虚拟镜像。VMware 的 PC2Mac tool需要配合Mac下的VMware Fusion来使用，生成的镜像是直接传到Mac上去了（不知道是否也能配合其他平台的VMware系列虚拟机软件，我猜是可以的）。PC2MAC是免费的，但是VMware Fusion这款软件售价49.99刀 （提供30天试用的）。<br /><br />Paragon go virtual不需要配合其他软件就可以使用。可以生成适用于Virtualbox，VMware，和Virtual PC的镜像。生成的镜像不用说，也可以在不同的Host平台上使用的。<br /><br />我个人偏向使用免费的Virtualbox，所以我个人会选Paragon Go Virtual来配合使用。当然，VMware的$49.99并不是很贵。只是日后每次大的版本升级都要准备好奉上银子吧。<br /><br />Kai 80GB的转移用了两个小时左右。我有130GB。我先去干点儿别的吧。<br /><br />=====<br />3:40 failed.<br /><br />Error message: The operation cannot be completed because some files are in use and prevent exclusive access to the volume.<br />=====<br />5:10 使用Run as Administrator选项重新运行软件.<br />试了Paragon: 网络不稳，失败<br />试了Pc2Mac:失败，原因不明，错误信息如前。决定放弃Pc2Mac。<br /><br />只能哪天换个网络来做测试了。<br /><br />=====<br />6:50 pm<br />有人提出解决那个exclusive access 的方法，收录于此（ 原文地址<a href="http://www.wilderssecurity.com/showthread.php?t=286923">在此</a>）<br /><blockquote><span class="Apple-style-span" style="font-family: verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: x-small;">          </span><br /><div class="p1"><span class="Apple-style-span" style="font-family: verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: x-small;">do the following:<span class="s1">&nbsp;&nbsp;</span></span></div><span class="Apple-style-span" style="font-family: verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: x-small;"></span><br /><div class="p1"><span class="Apple-style-span" style="font-family: verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: x-small;">* open the folder where GoVirtual is installed, it's usually:"C:\Program Files\Paragon Software\GoVirtual"<span class="s1">&nbsp;</span></span></div><span class="Apple-style-span" style="font-family: verdana, geneva, lucida, 'lucida grande', arial, helvetica, sans-serif; font-size: x-small;"><div class="p1">* find there "layout.ini" file and open it in Notepad<span class="s1">&nbsp;</span></div><div class="p1">* find "Use VSS = on" parameter and change it to "Use VSS = off"<span class="s1">&nbsp;</span></div><div class="p1">* find "Use VSS &lt;-&gt; Hotbackup switch = off" parameter and change it to "Use VSS &lt;-&gt; Hotbackup switch = on"* save changesrun P2V Copy again.</div></span></blockquote>目前程序正在运行。各单位情绪稳定。<br />====<br />7:06 pm<br />刚才望了一眼电脑，发现通过网络传输的速度太慢。这个150GB大小的虚拟机，需要17个小时左右才能完成。不知到是我的网络太慢啊，还是网络太慢，应该是网络太慢吧。反正我是离明早上班只有12个小时啦。停了程序，等什么时候有时间再完成吧。至少知道了怎样完成这个任务了。<br />＝＝＝＝＝＝＝<br />下次做这个任务时需要：高速的网络链接和充裕的时间。或者一块又较大空间的移动硬盘。移动硬盘还得被Mac和Windows所兼容。<br /><br /><br /><br />文章初稿<br />2011.09.25<br /><br /><br /><br /><br /><br />